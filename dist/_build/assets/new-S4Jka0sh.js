import{a as C,k as v,d as b,m as y,o as w,j as e,n as E,q as F,B as p,t as P,w as T,F as L,x as o,y as r,z as i,A as c,I as d,E as l,M as S,T as I,G as q,H as A,P as M,J as N,K as B,L as D,S as R,N as t,O as k,Q as g}from"./client-D0JzVCqi.js";const G=w({name:t().min(2,"El nombre del concesionario es requerido").max(100,"El nombre es demasiado largo"),contactName:t().min(2,"El nombre del contacto es requerido").max(100,"El nombre es demasiado largo"),email:t().email("Email inválido").optional().or(k("")),phone:t().optional().refine(n=>!n||n.length>=10,{message:"El teléfono debe tener al menos 10 dígitos"}),address:t().min(5,"La dirección es requerida").max(200,"La dirección es demasiado larga")});function H({onSuccess:n,onCancel:h}){const j=C(),m=v(),a=b({resolver:y(G),defaultValues:{name:"",contactName:"",email:"",phone:"",address:""},mode:"onChange"}),u=async s=>{try{const x={...s,email:s.email||void 0,phone:s.phone||void 0};await m.mutateAsync(x),g({title:"¡Éxito!",description:"Concesionario creado exitosamente.",variant:"success"}),a.reset(),n?n():j.navigate({to:"/consignments"})}catch(x){g({title:"Error",description:x.message||"Error al crear el concesionario. Por favor, inténtalo de nuevo.",variant:"destructive"})}},f=()=>{h?h():j.navigate({to:"/consignments"})};return e.jsxs(E,{className:"max-w-2xl mx-auto",children:[e.jsxs(F,{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(p,{className:"h-6 w-6 text-primary"}),e.jsx(P,{className:"text-2xl",children:"Nuevo Concesionario"})]}),e.jsx("p",{className:"text-muted-foreground",children:"Registra un nuevo concesionario para gestionar vehículos en consignación"})]}),e.jsx(T,{children:e.jsx(L,{...a,children:e.jsxs("form",{onSubmit:a.handleSubmit(u),className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(p,{className:"h-5 w-5"}),"Información del Negocio"]}),e.jsx(o,{control:a.control,name:"name",render:({field:s})=>e.jsxs(r,{children:[e.jsx(i,{children:"Nombre del Concesionario *"}),e.jsx(c,{children:e.jsx(d,{placeholder:"Auto Central, Vehículos del Norte, etc.",...s})}),e.jsx(l,{})]})}),e.jsx(o,{control:a.control,name:"address",render:({field:s})=>e.jsxs(r,{children:[e.jsxs(i,{className:"flex items-center gap-2",children:[e.jsx(S,{className:"h-4 w-4"}),"Dirección *"]}),e.jsx(c,{children:e.jsx(I,{placeholder:"Dirección completa del concesionario",className:"min-h-[80px]",...s})}),e.jsx(l,{})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(q,{className:"h-5 w-5"}),"Información de Contacto"]}),e.jsx(o,{control:a.control,name:"contactName",render:({field:s})=>e.jsxs(r,{children:[e.jsx(i,{children:"Nombre del Contacto *"}),e.jsx(c,{children:e.jsx(d,{placeholder:"Nombre completo del contacto principal",...s})}),e.jsx(l,{})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(o,{control:a.control,name:"email",render:({field:s})=>e.jsxs(r,{children:[e.jsxs(i,{className:"flex items-center gap-2",children:[e.jsx(A,{className:"h-4 w-4"}),"Email"]}),e.jsx(c,{children:e.jsx(d,{type:"email",placeholder:"contacto@concesionario.com",...s})}),e.jsx(l,{})]})}),e.jsx(o,{control:a.control,name:"phone",render:({field:s})=>e.jsxs(r,{children:[e.jsxs(i,{className:"flex items-center gap-2",children:[e.jsx(M,{className:"h-4 w-4"}),"Teléfono"]}),e.jsx(c,{children:e.jsx(d,{type:"tel",placeholder:"(809) 123-4567",...s})}),e.jsx(l,{})]})})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-6 border-t",children:[e.jsxs(N,{type:"button",variant:"outline",onClick:f,className:"flex items-center gap-2",children:[e.jsx(B,{className:"h-4 w-4"}),"Cancelar"]}),e.jsxs(N,{type:"submit",disabled:m.isPending,className:"flex items-center gap-2 flex-1",children:[m.isPending?e.jsx(D,{className:"h-4 w-4 animate-spin"}):e.jsx(R,{className:"h-4 w-4"}),m.isPending?"Guardando...":"Crear Concesionario"]})]})]})})})]})}const z=function(){return e.jsx("div",{className:"container py-8 animate-in fade-in-50 duration-500",children:e.jsx(H,{})})};export{z as component};
